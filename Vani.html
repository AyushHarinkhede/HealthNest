<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Chatbot - VANI Assistant</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #f8f9fa;
            --bg-chat: #e5ddd5;
            --text-primary: #000000;
            --text-secondary: #667781;
            --user-msg: #dcf8c6;
            --bot-msg: #ffffff;
            --border-color: #e9edef;
            --shadow: rgba(0, 0, 0, 0.08);
            --input-bg: #ffffff;
            --hover-bg: #f0f2f5;
            --accent: #00a884;
            --scroll-thumb: #c4c4c4;
        }

        [data-theme="dark"] {
            --bg-primary: #111b21;
            --bg-secondary: #202c33;
            --bg-chat: #0b141a;
            --text-primary: #e9edef;
            --text-secondary: #8696a0;
            --user-msg: #005c4b;
            --bot-msg: #202c33;
            --border-color: #2a3942;
            --shadow: rgba(0, 0, 0, 0.3);
            --input-bg: #2a3942;
            --hover-bg: #2a3942;
            --accent: #00a884;
            --scroll-thumb: #3b4a54;
        }

        body {
            font-family: 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            height: 100vh;
            display: flex;
            flex-direction: column;
            transition: all 0.3s ease;
            overflow: hidden;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--scroll-thumb);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--text-secondary);
        }

        /* Header */
        .header {
            background: var(--bg-secondary);
            padding: 12px 16px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid var(--border-color);
            box-shadow: 0 1px 3px var(--shadow);
            z-index: 10;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .bot-avatar {
            width: 42px;
            height: 42px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 18px;
            flex-shrink: 0;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.4);
        }

        .bot-info h2 {
            font-size: 17px;
            font-weight: 500;
            margin-bottom: 2px;
        }

        .bot-status {
            font-size: 13px;
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #00a884;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.6; transform: scale(0.9); }
        }

        .header-actions {
            display: flex;
            gap: 4px;
        }

        .icon-btn {
            background: transparent;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
            transition: all 0.2s;
            font-size: 20px;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .icon-btn:hover {
            background: var(--hover-bg);
            color: var(--text-primary);
        }

        .icon-btn:active {
            transform: scale(0.95);
        }

        /* Chat Container */
        .chat-container {
            flex: 1;
            overflow-y: auto;
            overflow-x: hidden;
            padding: 20px 8%;
            background: var(--bg-chat);
            display: flex;
            flex-direction: column;
            gap: 8px;
            position: relative;
        }

        /* Welcome Screen */
        .welcome-screen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 60px 20px;
            gap: 24px;
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .welcome-icon {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 50px;
            box-shadow: 0 8px 24px rgba(102, 126, 234, 0.4);
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .welcome-screen h1 {
            font-size: 32px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .welcome-screen p {
            color: var(--text-secondary);
            max-width: 500px;
            font-size: 16px;
            line-height: 1.6;
        }

        .suggestions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 12px;
            margin-top: 16px;
            width: 100%;
            max-width: 700px;
        }

        .suggestion-card {
            background: var(--bot-msg);
            border: 1px solid var(--border-color);
            padding: 16px 18px;
            border-radius: 14px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-align: left;
            box-shadow: 0 2px 6px var(--shadow);
        }

        .suggestion-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 6px 16px var(--shadow);
            border-color: var(--accent);
            background: var(--hover-bg);
        }

        .suggestion-icon {
            font-size: 28px;
            margin-bottom: 10px;
            display: block;
        }

        .suggestion-title {
            font-size: 15px;
            font-weight: 500;
            margin-bottom: 4px;
            color: var(--text-primary);
        }

        .suggestion-text {
            font-size: 13px;
            color: var(--text-secondary);
            line-height: 1.4;
        }

        /* Messages */
        .message-wrapper {
            display: flex;
            margin-bottom: 4px;
            animation: slideIn 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(15px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message-wrapper.user {
            justify-content: flex-end;
        }

        .message-wrapper.bot {
            justify-content: flex-start;
        }

        .message {
            display: flex;
            gap: 8px;
            max-width: 65%;
            align-items: flex-end;
        }

        .message.user {
            flex-direction: row-reverse;
        }

        .message-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            font-weight: 600;
            color: white;
            box-shadow: 0 1px 3px var(--shadow);
        }

        .message.bot .message-avatar {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .message.user .message-avatar {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .message-content-wrapper {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }

        .message-content {
            padding: 8px 12px;
            border-radius: 8px;
            line-height: 1.5;
            word-wrap: break-word;
            font-size: 14.5px;
            position: relative;
            box-shadow: 0 1px 2px var(--shadow);
        }

        .message.bot .message-content {
            background: var(--bot-msg);
            color: var(--text-primary);
            border-top-left-radius: 0;
        }

        .message.user .message-content {
            background: var(--user-msg);
            color: #000000;
            border-top-right-radius: 0;
        }

        .message-time {
            font-size: 11px;
            color: var(--text-secondary);
            padding: 0 4px;
        }

        .message.user .message-time {
            text-align: right;
        }

        /* Typing Indicator */
        .typing-wrapper {
            display: none;
            justify-content: flex-start;
            margin-bottom: 4px;
        }

        .typing-wrapper.active {
            display: flex;
        }

        .typing-indicator {
            display: flex;
            gap: 4px;
            padding: 12px 16px;
            background: var(--bot-msg);
            border-radius: 8px;
            border-top-left-radius: 0;
            box-shadow: 0 1px 2px var(--shadow);
            align-items: center;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--text-secondary);
            animation: typing 1.4s infinite;
        }

        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing {
            0%, 60%, 100% {
                transform: scale(0.8);
                opacity: 0.5;
            }
            30% {
                transform: scale(1.1);
                opacity: 1;
            }
        }

        /* Input Container */
        .input-container {
            padding: 10px 16px 16px;
            background: var(--bg-secondary);
            border-top: 1px solid var(--border-color);
            display: flex;
            gap: 8px;
            align-items: flex-end;
        }

        .input-wrapper {
            flex: 1;
            display: flex;
            align-items: flex-end;
            background: var(--input-bg);
            border: 2px solid transparent;
            border-radius: 24px;
            padding: 10px 16px;
            transition: all 0.2s;
            box-shadow: 0 1px 3px var(--shadow);
        }

        .input-wrapper:focus-within {
            border-color: var(--accent);
            box-shadow: 0 2px 8px var(--shadow);
        }

        .attach-btn {
            background: transparent;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 4px 8px;
            font-size: 20px;
            transition: all 0.2s;
        }

        .attach-btn:hover {
            color: var(--text-primary);
            transform: scale(1.1);
        }

        #messageInput {
            flex: 1;
            border: none;
            outline: none;
            background: transparent;
            color: var(--text-primary);
            font-size: 15px;
            resize: none;
            max-height: 120px;
            font-family: inherit;
            line-height: 1.5;
            padding: 0 8px;
        }

        #messageInput::placeholder {
            color: var(--text-secondary);
        }

        .emoji-btn {
            background: transparent;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 4px 8px;
            font-size: 22px;
            transition: all 0.2s;
        }

        .emoji-btn:hover {
            transform: scale(1.1);
        }

        .send-btn {
            background: var(--accent);
            border: none;
            color: white;
            width: 48px;
            height: 48px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
            transition: all 0.2s;
            flex-shrink: 0;
            box-shadow: 0 2px 8px rgba(0, 168, 132, 0.3);
        }

        .send-btn:hover:not(:disabled) {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(0, 168, 132, 0.4);
        }

        .send-btn:active:not(:disabled) {
            transform: scale(0.95);
        }

        .send-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
            box-shadow: none;
        }

        /* Scroll to Bottom Button */
        .scroll-bottom-btn {
            position: fixed;
            bottom: 90px;
            right: 24px;
            background: var(--accent);
            border: none;
            color: white;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            cursor: pointer;
            display: none;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            box-shadow: 0 4px 12px rgba(0, 168, 132, 0.4);
            transition: all 0.3s;
            z-index: 5;
        }

        .scroll-bottom-btn.show {
            display: flex;
        }

        .scroll-bottom-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 16px rgba(0, 168, 132, 0.5);
        }

        /* Date Separator */
        .date-separator {
            text-align: center;
            margin: 20px 0 12px;
            position: relative;
        }

        .date-separator span {
            background: var(--bg-secondary);
            padding: 6px 16px;
            border-radius: 8px;
            font-size: 12px;
            color: var(--text-secondary);
            box-shadow: 0 1px 3px var(--shadow);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .chat-container {
                padding: 16px 5%;
            }

            .message {
                max-width: 80%;
            }

            .suggestions {
                grid-template-columns: 1fr;
            }

            .welcome-screen h1 {
                font-size: 26px;
            }

            .welcome-icon {
                width: 80px;
                height: 80px;
                font-size: 40px;
            }

            .header h2 {
                font-size: 16px;
            }

            .scroll-bottom-btn {
                bottom: 80px;
                right: 16px;
            }
        }

        .hidden {
            display: none !important;
        }

        /* Message Actions */
        .message-actions {
            display: none;
            position: absolute;
            top: -30px;
            right: 0;
            background: var(--bg-secondary);
            border-radius: 8px;
            padding: 4px;
            box-shadow: 0 2px 8px var(--shadow);
            gap: 2px;
        }

        .message-content-wrapper:hover .message-actions {
            display: flex;
        }

        .action-btn {
            background: transparent;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 6px 8px;
            border-radius: 6px;
            font-size: 16px;
            transition: all 0.2s;
        }

        .action-btn:hover {
            background: var(--hover-bg);
            color: var(--text-primary);
        }
    </style>
</head>
<body data-theme="light">
    <!-- Header -->
    <div class="header">
        <div class="header-left">
            <div class="bot-avatar">🤖</div>
            <div class="bot-info">
                <h2>VANI Assistant</h2>
                <div class="bot-status">
                    <span class="status-dot"></span>
                    <span id="statusText">Online</span>
                </div>
            </div>
        </div>
        <div class="header-actions">
            <button class="icon-btn" id="searchBtn" title="Search">🔍</button>
            <button class="icon-btn" id="themeToggle" title="Theme Toggle">🌙</button>
            <button class="icon-btn" id="settingsBtn" title="Settings">⚙️</button>
            <button class="icon-btn" id="clearChat" title="Clear Chat">🗑️</button>
        </div>
    </div>

    <!-- Chat Container -->
    <div class="chat-container" id="chatContainer">
        <div class="welcome-screen" id="welcomeScreen">
            <div class="welcome-icon">👋</div>
            <h1>Namaste! Main VANI hoon</h1>
            <p>Main aapka personal AI assistant hoon. Aap mujhse kuch bhi pooch sakte hain - coding, advice, information, ya sirf casual baat. Main hamesha yahan madad ke liye ready hoon!</p>
            <div class="suggestions">
                <div class="suggestion-card" data-text="VANI, tum kya kar sakti ho?">
                    <span class="suggestion-icon">💡</span>
                    <div class="suggestion-title">Capabilities</div>
                    <div class="suggestion-text">Jaan lo VANI kya help kar sakti hai</div>
                </div>
                <div class="suggestion-card" data-text="Mujhe Python seekhna hai, kaha se shuru karu?">
                    <span class="suggestion-icon">💻</span>
                    <div class="suggestion-title">Coding Sikho</div>
                    <div class="suggestion-text">Programming aur development me madad</div>
                </div>
                <div class="suggestion-card" data-text="Ek motivational story sunao">
                    <span class="suggestion-icon">📖</span>
                    <div class="suggestion-title">Stories</div>
                    <div class="suggestion-text">Kahani, poems aur creative content</div>
                </div>
                <div class="suggestion-card" data-text="Mujhe ek healthy meal plan suggest karo">
                    <span class="suggestion-icon">🍎</span>
                    <div class="suggestion-title">Health & Wellness</div>
                    <div class="suggestion-text">Fitness aur health tips</div>
                </div>
            </div>
        </div>

        <!-- Typing Indicator -->
        <div class="typing-wrapper" id="typingWrapper">
            <div class="message">
                <div class="message-avatar">🤖</div>
                <div class="typing-indicator">
                    <span class="typing-dot"></span>
                    <span class="typing-dot"></span>
                    <span class="typing-dot"></span>
                </div>
            </div>
        </div>
    </div>

    <!-- Scroll to Bottom Button -->
    <button class="scroll-bottom-btn" id="scrollBottomBtn">⬇</button>

    <!-- Input Container -->
    <div class="input-container">
        <div class="input-wrapper">
            <button class="attach-btn" id="attachBtn" title="Attach File">📎</button>
            <textarea 
                id="messageInput" 
                placeholder="Type a message..." 
                rows="1"
            ></textarea>
            <button class="emoji-btn" id="emojiBtn" title="Emoji">😊</button>
        </div>
        <button class="send-btn" id="sendBtn" disabled title="Send Message">
            ➤
        </button>
    </div>

    <script>
        // ============= CONFIGURATION =============
        const CONFIG = {
            botName: 'VANI',
            maxMessageLength: 5000,
            typingDelay: 1500,
            autoScrollThreshold: 100
        };

        // ============= STATE MANAGEMENT =============
        let chatState = {
            messages: JSON.parse(localStorage.getItem('chatHistory')) || [],
            currentTheme: localStorage.getItem('theme') || 'light',
            isTyping: false
        };

        // ============= DOM ELEMENTS =============
        const elements = {
            body: document.body,
            themeToggle: document.getElementById('themeToggle'),
            chatContainer: document.getElementById('chatContainer'),
            messageInput: document.getElementById('messageInput'),
            sendBtn: document.getElementById('sendBtn'),
            clearChatBtn: document.getElementById('clearChat'),
            welcomeScreen: document.getElementById('welcomeScreen'),
            typingWrapper: document.getElementById('typingWrapper'),
            scrollBottomBtn: document.getElementById('scrollBottomBtn'),
            statusText: document.getElementById('statusText'),
            attachBtn: document.getElementById('attachBtn'),
            emojiBtn: document.getElementById('emojiBtn'),
            searchBtn: document.getElementById('searchBtn'),
            settingsBtn: document.getElementById('settingsBtn')
        };

        // ============= THEME MANAGEMENT =============
        function initTheme() {
            elements.body.setAttribute('data-theme', chatState.currentTheme);
            elements.themeToggle.textContent = chatState.currentTheme === 'light' ? '🌙' : '☀️';
        }

        elements.themeToggle.addEventListener('click', () => {
            chatState.currentTheme = chatState.currentTheme === 'light' ? 'dark' : 'light';
            elements.body.setAttribute('data-theme', chatState.currentTheme);
            elements.themeToggle.textContent = chatState.currentTheme === 'light' ? '🌙' : '☀️';
            localStorage.setItem('theme', chatState.currentTheme);
        });

        // ============= MESSAGE INPUT HANDLING =============
        elements.messageInput.addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = Math.min(this.scrollHeight, 120) + 'px';
            elements.sendBtn.disabled = this.value.trim() === '';
        });

        elements.messageInput.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });

        elements.sendBtn.addEventListener('click', sendMessage);

        // ============= SUGGESTION CARDS =============
        document.querySelectorAll('.suggestion-card').forEach(card => {
            card.addEventListener('click', function() {
                const text = this.getAttribute('data-text');
                elements.messageInput.value = text;
                elements.messageInput.dispatchEvent(new Event('input'));
                elements.messageInput.focus();
            });
        });

        // ============= SEND MESSAGE =============
        async function sendMessage() {
            const text = elements.messageInput.value.trim();
            if (text === '' || chatState.isTyping) return;

            elements.welcomeScreen.classList.add('hidden');
            
            const userMessage = {
                text: text,
                sender: 'user',
                time: getCurrentTime(),
                timestamp: Date.now()
            };

            addMessageToUI(userMessage);
            chatState.messages.push(userMessage);
            saveChatHistory();

            elements.messageInput.value = '';
            elements.messageInput.style.height = 'auto';
            elements.sendBtn.disabled = true;

            // Show typing indicator
            showTyping();

            try {
                // Call VANI.js or your backend
                const response = await getBotResponse(text);
                
                hideTyping();

                const botMessage = {
                    text: response,
                    sender: 'bot',
                    time: getCurrentTime(),
                    timestamp: Date.now()
                };

                addMessageToUI(botMessage);
                chatState.messages.push(botMessage);
                saveChatHistory();
            } catch (error) {
                hideTyping();
                const errorMessage = {
                    text: 'Sorry, kuch galat ho gaya. Please try again.',
                    sender: 'bot',
                    time: getCurrentTime(),
                    timestamp: Date.now()
                };
                addMessageToUI(errorMessage);
            }
        }

        // ============= ADD MESSAGE TO UI =============
        function addMessageToUI(message) {
            const messageWrapper = document.createElement('div');
            messageWrapper.className = `message-wrapper ${message.sender}`;

            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${message.sender}`;

            const avatar = document.createElement('div');
            avatar.className = 'message-avatar';
            avatar.textContent = message.sender === 'user' ? '👤' : '🤖';

            const contentWrapper = document.createElement('div');
            contentWrapper.className = 'message-content-wrapper';

            const content = document.createElement('div');
            content.className = 'message-content';
            content.textContent = message.text;

            const timeDiv = document.createElement('div');
            timeDiv.className = 'message-time';
            timeDiv.textContent = message.time;

            contentWrapper.appendChild(content);
            contentWrapper.appendChild(timeDiv);

            messageDiv.appendChild(avatar);
            messageDiv.appendChild(contentWrapper);
            messageWrapper.appendChild(messageDiv);

            elements.chatContainer.insertBefore(messageWrapper, elements.typingWrapper);
            
            scrollToBottom();
        }

        // ============= TYPING INDICATOR =============
        function showTyping() {
            chatState.isTyping = true;
            elements.typingWrapper.classList.add('active');
            elements.statusText.textContent = 'Typing...';
            scrollToBottom();
        }

        function hideTyping() {
            chatState.isTyping = false;
            elements.typingWrapper.classList.remove('active');
            elements.statusText.textContent = 'Online';
        }

        // ============= SCROLL MANAGEMENT =============
        function scrollToBottom(smooth = true) {
            setTimeout(() => {
                elements.chatContainer.scrollTo({
                    top: elements.chatContainer.scrollHeight,
                    behavior: smooth ? 'smooth' : 'auto'
                });
            }, 100);
        }

        elements.scrollBottomBtn.addEventListener('click', () => scrollToBottom());

        elements.chatContainer.addEventListener('scroll', () => {
            const scrollTop = elements.chatContainer.scrollTop;
            const scrollHeight = elements.chatContainer.scrollHeight;
            const clientHeight = elements.chatContainer.clientHeight;
            
            if (scrollHeight - scrollTop - clientHeight > CONFIG.autoScrollThreshold) {
                elements.scrollBottomBtn.classList.add('show');
            } else {
                elements.scrollBottomBtn.classList.remove('show');
            }
        });

        // ============= UTILITY FUNCTIONS =============
        function getCurrentTime() {
            const now = new Date();
            return now.toLocaleTimeString('hi-IN', { 
                hour: '2-digit', 
                minute: '2-digit',
                hour12: true 
            });
        }

        function saveChatHistory() {
            localStorage.setItem('chatHistory', JSON.stringify(chatState.messages));
        }

        function loadChatHistory() {
            if (chatState.messages.length > 0) {
                elements.welcomeScreen.classList.add('hidden');
                
                let lastDate = '';
                chatState.messages.forEach(msg => {
                    const msgDate = new Date(msg.timestamp).toLocaleDateString('hi-IN');
                    if (msgDate !== lastDate) {
                        addDateSeparator(msgDate);
                        lastDate = msgDate;
                    }
                    addMessageToUI(msg);
                });
                
                scrollToBottom(false);
            }
        }

        function addDateSeparator(dateStr) {
            const separator = document.createElement('div');
            separator.className = 'date-separator';
            separator.innerHTML = `<span>${dateStr}</span>`;
            elements.chatContainer.insertBefore(separator, elements.typingWrapper);
        }

        // ============= CLEAR CHAT =============
        elements.clearChatBtn.addEventListener('click', () => {
            if (confirm('Kya aap sach me saari chat clear karna chahte hain?')) {
                chatState.messages = [];
                localStorage.removeItem('chatHistory');
                
                const messages = elements.chatContainer.querySelectorAll('.message-wrapper, .date-separator');
                messages.forEach(msg => msg.remove());
                
                elements.welcomeScreen.classList.remove('hidden');
            }
        });

        // ============= VANI.js INTEGRATION =============
        async function getBotResponse(userMessage) {
            // // ============================================
            // // YAHAN APNA VANI.js CODE INTEGRATE KAREIN
            // // ============================================
            
            // /* EXAMPLE INTEGRATION:
            
            // // Method 1: Direct API Call
            // try {
            //     const response = await fetch('YOUR_VANI_API_ENDPOINT', {
            //         method: 'POST',
            //         headers: {
            //             'Content-Type': 'application/json',
            //         },
            //         body: JSON.stringify({ message: userMessage })
            //     });
            //     const data = await response.json();
            //     return data.reply;
            // } catch (error) {
            //     console.error('API Error:', error);
            //     throw error;
            // }
            
            // // Method 2: If VANI.js is imported as module
            // import { VANI } from './vani.js';
            // const response = await VANI.getResponse(userMessage);
            // return response;
            
            // // Method 3: If VANI is global object
            // if (window.VANI) {
            //     const response = await window.VANI.chat(userMessage);
            //     return response;
            // }
            
            // */

            // // ============================================
            // // DEMO RESPONSES (Replace with actual VANI.js)
            // ============================================
            return new Promise((resolve) => {
                setTimeout(() => {
                    const responses = {
                        greetings: [
                            'Namaste! Main VANI hoon. Kaise madad kar sakti hoon?',
                            'Hello! Aap kaise hain? Kya help chahiye?',
                            'Haan bataiye, main sun rahi hoon!'
                        ],
                        coding: [
                            'Coding ek interesting skill hai! Main aapko step by step guide kar sakti hoon. Kis language me interested hain?',
                            'Programming sikhna easy hai agar consistent practice karo. Python se start karna best hai beginners ke liye!',
                            'Main aapko coding concepts explain kar sakti hoon. Kya specific doubt hai?'
                        ],
                        general: [
                            'Yeh ek achha question hai! Let me explain...',
                            'Main samajh gayi. Iske baare me main detail me bata sakti hoon.',
                            'Interesting! Iska answer thoda complex hai, par main simplify kar ke batati hoon.',
                            'Bilkul! Main aapki madad kar sakti hoon is topic me.'
                        ],
                        capabilities: [
                            'Main bahut kuch kar sakti hoon:\n\n✅ Coding me help\n✅ Questions answer\n✅ Creative writing\n✅ Problem solving\n✅ Learning guidance\n✅ General conversation\n\nAap mujhse kuch bhi pooch sakte hain!',
                            'Main ek AI assistant hoon jo aapki har tarah se madad kar sakti hai - chahiye wo study ho, coding ho, ya sirf casual baat. Try karo!'
                        ],
                        thanks: [
                            'Aapka swagat hai! 😊 Kuch aur help chahiye?',
                            'Koi baat nahi! Hamesha khushi hai madad karke. Aur kuch?',
                            'Welcome! Main yahan hoon agar aur help chahiye.'
                        ]
                    };

                    const msg = userMessage.toLowerCase();
                    let response;

                    if (msg.includes('hello') || msg.includes('hi') || msg.includes('namaste') || msg.includes('hey')) {
                        response = responses.greetings[Math.floor(Math.random() * responses.greetings.length)];
                    } else if (msg.includes('vani') && (msg.includes('kya kar') || msg.includes('capabilities') || msg.includes('help'))) {
                        response = responses.capabilities[Math.floor(Math.random() * responses.capabilities.length)];
                    } else if (msg.includes('coding') || msg.includes('program') || msg.includes('python') || msg.includes('javascript')) {
                        response = responses.coding[Math.floor(Math.random() * responses.coding.length)];
                    } else if (msg.includes('thank') || msg.includes('dhanyavad') || msg.includes('shukriya')) {
                        response = responses.thanks[Math.floor(Math.random() * responses.thanks.length)];
                    } else {
                        response = responses.general[Math.floor(Math.random() * responses.general.length)];
                    }

                    resolve(response);
                }, CONFIG.typingDelay);
            });
        }

        // ============= ADDITIONAL FEATURES =============
        
        // Attach Button (File Upload)
        elements.attachBtn.addEventListener('click', () => {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = 'image/*,.pdf,.doc,.docx,.txt';
            input.onchange = (e) => {
                const file = e.target.files[0];
                if (file) {
                    // Handle file upload here
                    console.log('File selected:', file.name);
                    // You can integrate file processing with VANI.js
                }
            };
            input.click();
        });

        // Emoji Button
        elements.emojiBtn.addEventListener('click', () => {
            const emojis = ['😊', '😂', '❤️', '👍', '🎉', '🔥', '✨', '💯', '🤔', '😎'];
            const emoji = emojis[Math.floor(Math.random() * emojis.length)];
            elements.messageInput.value += emoji;
            elements.messageInput.focus();
            elements.messageInput.dispatchEvent(new Event('input'));
        });

        // Search Button
        elements.searchBtn.addEventListener('click', () => {
            const searchTerm = prompt('Chat me kya search karna chahte hain?');
            if (searchTerm) {
                const results = chatState.messages.filter(msg => 
                    msg.text.toLowerCase().includes(searchTerm.toLowerCase())
                );
                if (results.length > 0) {
                    alert(`${results.length} messages milein "${searchTerm}" ke saath`);
                } else {
                    alert('Koi result nahi mila');
                }
            }
        });

        // Settings Button
        elements.settingsBtn.addEventListener('click', () => {
            alert('Settings panel coming soon! 🎨\n\nFeatures:\n- Notification settings\n- Chat backup\n- Export chat\n- Font size\n- Language preferences');
        });

        // Copy message on double click
        document.addEventListener('dblclick', (e) => {
            if (e.target.classList.contains('message-content')) {
                const text = e.target.textContent;
                navigator.clipboard.writeText(text).then(() => {
                    const toast = document.createElement('div');
                    toast.style.cssText = `
                        position: fixed;
                        bottom: 100px;
                        left: 50%;
                        transform: translateX(-50%);
                        background: var(--accent);
                        color: white;
                        padding: 12px 24px;
                        border-radius: 8px;
                        box-shadow: 0 4px 12px rgba(0,0,0,0.3);
                        z-index: 1000;
                        animation: slideIn 0.3s ease-out;
                    `;
                    toast.textContent = 'Message copied! ✓';
                    document.body.appendChild(toast);
                    setTimeout(() => toast.remove(), 2000);
                });
            }
        });

        // Detect user activity
        let inactivityTimer;
        function resetInactivityTimer() {
            clearTimeout(inactivityTimer);
            elements.statusText.textContent = 'Online';
            inactivityTimer = setTimeout(() => {
                elements.statusText.textContent = 'Away';
            }, 300000); // 5 minutes
        }

        ['mousedown', 'keypress', 'scroll', 'touchstart'].forEach(event => {
            document.addEventListener(event, resetInactivityTimer);
        });

        // ============= INITIALIZATION =============
        function init() {
            initTheme();
            loadChatHistory();
            resetInactivityTimer();
            elements.messageInput.focus();
            
            // Add welcome message if no chat history
            if (chatState.messages.length === 0) {
                setTimeout(() => {
                    const welcomeMsg = {
                        text: 'Namaste! Main VANI hoon, aapki AI assistant. Aap mujhse kuch bhi pooch sakte hain. Kaise help kar sakti hoon? 😊',
                        sender: 'bot',
                        time: getCurrentTime(),
                        timestamp: Date.now()
                    };
                    addMessageToUI(welcomeMsg);
                    chatState.messages.push(welcomeMsg);
                    saveChatHistory();
                }, 1000);
            }
        }

        // Start the application
        init();

        // ============= SERVICE WORKER (Optional - for PWA) =============
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                // Uncomment to enable PWA features
                // navigator.serviceWorker.register('/sw.js');
            });
        }

        // ============= KEYBOARD SHORTCUTS =============
        document.addEventListener('keydown', (e) => {
            // Ctrl/Cmd + K to focus input
            if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
                e.preventDefault();
                elements.messageInput.focus();
            }
            
            // Ctrl/Cmd + L to clear chat
            if ((e.ctrlKey || e.metaKey) && e.key === 'l') {
                e.preventDefault();
                elements.clearChatBtn.click();
            }
            
            // Ctrl/Cmd + D to toggle theme
            if ((e.ctrlKey || e.metaKey) && e.key === 'd') {
                e.preventDefault();
                elements.themeToggle.click();
            }
        });

        console.log('%c🤖 VANI Chatbot Ready! ', 'background: #667eea; color: white; padding: 10px; font-size: 16px; border-radius: 5px;');
        console.log('%cKeyboard Shortcuts:', 'font-weight: bold; margin-top: 10px;');
        console.log('Ctrl/Cmd + K - Focus message input');
        console.log('Ctrl/Cmd + L - Clear chat');
        console.log('Ctrl/Cmd + D - Toggle theme');
        console.log('Double-click message - Copy text');
    </script>
</body>
</html> 